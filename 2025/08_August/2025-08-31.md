# TIL (Today I Learned) 작성 가이드 & 템플릿


> **TIL의 핵심 원칙: 완벽보다 꾸준함을, 설명할 수 없으면 아는 것이 아니다.**

---

## 📁 폴더 구조

TIL은 연도별, 월별로 폴더를 나누어 관리합니다. 파일명은 `yyyy-mm-dd.md` 형식을 따릅니다.

```bash
TIL/
├── 2025/
│   ├── 08_August/
│   │   ├── 2025-08-31.md
│   │   └── ...
│   └── 09_September/
└── README.md



## Trouble Shooting: PyTorch PNG 이미지 예측 시 채널 불일치 `RuntimeError`

### 겪은 문제 (Problem)

학습된 모델로 단일 이미지를 예측하는 함수(`visualize_model_predictions`)를 테스트했다. `.jpg` 확장자 이미지를 넣었을 때는 예측이 잘 되었지만, `.png` 확장자 이미지를 넣자 아래와 같은 `RuntimeError`가 발생했다.

```bash
RuntimeError: The size of tensor a (4) must match the size of tensor b (3) at non-singleton dimension 0
원인 분석 (Cause)
에러 메시지는 텐서 크기 4와 3이 맞지 않는다고 알려주고 있었다. 이미지 처리에서 이 숫자는 보통 채널(Channel) 수를 의미한다.

JPG vs PNG: JPG 이미지는 대부분 **3채널 (RGB)**인 반면, PNG 이미지는 투명도(Alpha)를 포함한 **4채널 (RGBA)**인 경우가 많다.

transforms.Normalize: 내 데이터 전처리 파이프라인에는 3채널(RGB) 기준으로 정의된 정규화 단계가 포함되어 있다. (mean과 std가 각각 3개의 값을 가짐)

결론: 4채널 RGBA 이미지가 Image.open()으로 그대로 로드된 후, 3채널을 가정하는 Normalize 단계를 통과하려고 하니 채널 수가 맞지 않아 오류가 발생한 것이었다.

※ 추가 궁금증: 학습 시에는 PNG 파일이 있어도 문제가 없었던 이유는, datasets.ImageFolder가 내부적으로 이미지를 불러올 때 3채널 RGB 형식으로 자동 변환해주기 때문이었다. 수동으로 이미지를 하나씩 열 때는 이 과정이 생략된다.

해결 방법 (Solution)
Image.open()으로 이미지를 연 직후, .convert('RGB') 메소드를 호출하여 이미지를 명시적으로 3채널 RGB 형식으로 변환해준다.
